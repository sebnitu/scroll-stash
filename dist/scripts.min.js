var ScrollStash=function(){"use strict";var t=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t};var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var n=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var a=c((function(t){function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(r)}t.exports=e})),i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt,p="object"==a(o)&&o&&o.Object===Object&&o,v="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,h=p||v||Function("return this")(),d=Object.prototype.toString,y=Math.max,b=Math.min,g=function(){return h.Date.now()};function m(t,e,r){var n,o,c,a,i,s,u=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var r=n,c=o;return n=o=void 0,u=e,a=t.apply(c,r)}function h(t){return u=t,i=setTimeout(m,e),l?v(t):a}function d(t){var r=t-s;return void 0===s||r>=e||r<0||f&&t-u>=c}function m(){var t=g();if(d(t))return w(t);i=setTimeout(m,function(t){var r=e-(t-s);return f?b(r,c-(t-u)):r}(t))}function w(t){return i=void 0,p&&n?v(t):(n=o=void 0,a)}function E(){var t=g(),r=d(t);if(n=arguments,o=this,s=t,r){if(void 0===i)return h(s);if(f)return i=setTimeout(m,e),v(s)}return void 0===i&&(i=setTimeout(m,e)),a}return e=O(e)||0,j(r)&&(l=!!r.leading,c=(f="maxWait"in r)?y(O(r.maxWait)||0,e):c,p="trailing"in r?!!r.trailing:p),E.cancel=function(){void 0!==i&&clearTimeout(i),u=0,n=s=o=i=void 0},E.flush=function(){return void 0===i?a:w(g())},E}function j(t){var e=a(t);return!!t&&("object"==e||"function"==e)}function w(t){return"symbol"==a(t)||function(t){return!!t&&"object"==a(t)}(t)&&"[object Symbol]"==d.call(t)}function O(t){if("number"==typeof t)return t;if(w(t))return NaN;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||l.test(t)?f(t.slice(2),r?2:8):s.test(t)?NaN:+t}var E=function(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return j(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),m(t,e,{leading:n,maxWait:e,trailing:o})},S=c((function(t,e){var r="[object Map]",n="[object Set]",c=/^\[object .+?Constructor\]$/,i="object"==a(o)&&o&&o.Object===Object&&o,s="object"==("undefined"==typeof self?"undefined":a(self))&&self&&self.Object===Object&&self,u=i||s||Function("return this")(),l=e&&!e.nodeType&&e,f=l&&t&&!t.nodeType&&t,p=f&&f.exports===l;var v,h,d,y=Function.prototype,b=Object.prototype,g=u["__core-js_shared__"],m=(v=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",j=y.toString,w=b.hasOwnProperty,O=b.toString,E=RegExp("^"+j.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=p?u.Buffer:void 0,x=b.propertyIsEnumerable,P=S?S.isBuffer:void 0,T=(h=Object.keys,d=Object,function(t){return h(d(t))}),A=W(u,"DataView"),C=W(u,"Map"),k=W(u,"Promise"),D=W(u,"Set"),q=W(u,"WeakMap"),$=!x.call({valueOf:1},"valueOf"),I=K(A),_=K(C),M=K(k),L=K(D),B=K(q);function N(t){return!(!G(t)||function(t){return!!m&&m in t}(t))&&(J(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?E:c).test(K(t))}function W(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return N(r)?r:void 0}var F=function(t){return O.call(t)};function K(t){if(null!=t){try{return j.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t){return function(t){return function(t){return!!t&&"object"==a(t)}(t)&&z(t)}(t)&&w.call(t,"callee")&&(!x.call(t,"callee")||"[object Arguments]"==O.call(t))}(A&&"[object DataView]"!=F(new A(new ArrayBuffer(1)))||C&&F(new C)!=r||k&&"[object Promise]"!=F(k.resolve())||D&&F(new D)!=n||q&&"[object WeakMap]"!=F(new q))&&(F=function(t){var e=O.call(t),o="[object Object]"==e?t.constructor:void 0,c=o?K(o):void 0;if(c)switch(c){case I:return"[object DataView]";case _:return r;case M:return"[object Promise]";case L:return n;case B:return"[object WeakMap]"}return e});var H=Array.isArray;function z(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!J(t)}var V=P||function(){return!1};function J(t){var e=G(t)?O.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function G(t){var e=a(t);return!!t&&("object"==e||"function"==e)}t.exports=function(t){if(z(t)&&(H(t)||"string"==typeof t||"function"==typeof t.splice||V(t)||R(t)))return!t.length;var e=F(t);if(e==r||e==n)return!t.size;if($||function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||b)}(t))return!T(t).length;for(var o in t)if(w.call(t,o))return!1;return!0}})),x={autoInit:!1,dataScroll:"scroll-stash",dataAnchor:"scroll-stash-anchor",selectorAnchor:"",selectorAnchorParent:"",selectorTopElem:"",selectorBotElem:"",alignment:"nearest",behavior:"auto",anchorPadding:16,saveKey:"ScrollStash",throttleDelay:100,customEventPrefix:"scroll-stash:"},P=c((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.addClass=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];(t=t.forEach?t:[t]).forEach((function(t){var e;(e=t.classList).add.apply(e,r)}))},e.breakpoints={xs:"480px",sm:"620px",md:"760px",lg:"990px",xl:"1380px"},e.camelCase=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},e.hasClass=function(t){t=t.forEach?t:[t],t=[].slice.call(t);for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.some((function(e){return t.some((function(t){if(t.classList.contains(e))return!0}))}))},e.hyphenCase=function(t){return t.replace(/([a-z][A-Z])/g,(function(t){return t[0]+"-"+t[1].toLowerCase()}))},e.removeClass=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];(t=t.forEach?t:[t]).forEach((function(t){var e;(e=t.classList).remove.apply(e,r)}))},e.toggleClass=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];(t=t.forEach?t:[t]).forEach((function(t){r.forEach((function(e){t.classList.toggle(e)}))}))}})),T=function(t,e,r){var n=r.anchorPadding;if(r.selectorTopElem){var o=t.querySelector(r.selectorTopElem);o&&(n+=o.offsetHeight)}return e.offsetTop-n},A=function(t,e,r){var n=r.anchorPadding;if(r.selectorBotElem){var o=t.querySelector(r.selectorBotElem);o&&(n+=o.offsetHeight)}return e.offsetTop-(t.offsetHeight-(e.offsetHeight+n))},C=function(t,e,r){var n=function(t,e,r){var n=T(t,e,r),o=A(t,e,r);return!(t.scrollTop>n||t.scrollTop<o)}(t,e,r);switch(r.alignment){case"start":return!n&&T(t,e,r);case"center":return!n&&function(t,e,r){var n=T(t,e,r),o=A(t,e,r);return o+(n-o)/2}(t,e,r);case"end":return!n&&A(t,e,r);case"nearest":return function(t,e,r){var n=T(t,e,r),o=A(t,e,r);return t.scrollTop>n?n:t.scrollTop<o&&o}(t,e,r);default:return!1}},k=function(t,e){var r=t.dataset[P.camelCase(e.dataAnchor)];if("false"==r||"ignore"==r)return null;if(r&&t.querySelector(r))return t.querySelector(r);var n=e.selectorAnchor?t.querySelector(e.selectorAnchor):null;if(n&&e.selectorAnchorParent){var o=n.closest(e.selectorAnchorParent);if(o)return o}return n||null},D=function(t,e,r){var n=k(t,r);if(n){var o=C(t,n,r);return o?(e=e||r.behavior,t.scroll({top:o,behavior:e}),t.dispatchEvent(new CustomEvent(r.customEventPrefix+"anchor",{bubbles:!0,detail:{scrolled:{value:o,behavior:e},key:t.dataset[P.camelCase(r.dataScroll)]}})),{scrolled:{value:o,behavior:e},msg:"Anchor was scrolled into view"}):{scrolled:!1,msg:"Anchor is already in view"}}return{scrolled:!1,msg:"Anchor was not found"}},q=function(t){console.log("stateSave");var e={};return document.querySelectorAll("[data-".concat(t.dataScroll,"]")).forEach((function(r){var n=r.dataset[P.camelCase(t.dataScroll)];n&&(e[n]=r.scrollTop)})),localStorage.setItem(t.saveKey,JSON.stringify(e)),document.dispatchEvent(new CustomEvent(t.customEventPrefix+"saved",{bubbles:!0,detail:{state:e}})),e},$=function(t){if(console.log("stateSet",t),localStorage.getItem(t.saveKey)){var e=JSON.parse(localStorage.getItem(t.saveKey));return Object.keys(e).forEach((function(r){var n=document.querySelector("[data-".concat(t.dataScroll,'="').concat(r,'"]'));n&&(n.scrollTop=e[r])})),document.dispatchEvent(new CustomEvent(t.customEventPrefix+"applied",{bubbles:!0,detail:{state:e}})),e}return{}};function I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?I(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}return function(){function t(r){e(this,t),this.settings=_(_({},x),r),this.state={},this.scrolls=[],this.settings.autoInit&&this.init()}return n(t,[{key:"handler",value:function(){this.state=q(this.settings)}},{key:"throttleRef",value:function(){E(this.handler,this.settings.throttleDelay,{leading:!1})}},{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&(this.settings=_(_({},this.settings),e)),this.state=$(this.settings),this.state=S(this.state)?q(this.settings):this.state,this.scrolls=document.querySelectorAll("[data-".concat(this.settings.dataScroll,"]")),this.scrolls.forEach((function(e){e.addEventListener("scroll",t.throttleRef.bind(t),!1),D(e,!1,t.settings)}))}},{key:"destroy",value:function(){var t=this;this.scrolls.forEach((function(e){e.removeEventListener("scroll",t.throttleRef.bind(t),!1)})),this.state={},this.scrolls=[],localStorage.removeItem(this.settings.saveKey)}}]),t}()}();
