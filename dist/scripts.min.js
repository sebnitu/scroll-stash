this.ScrollStash=function(){"use strict";var t=function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t};function e(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function o(o){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?e(Object(s),!0).forEach((function(e){t(o,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(s,t))}))}return o}return function(t){var e={};e.settings=o(o({},{autoInit:!1,dataScroll:"scroll-stash",selector:"[data-scroll-stash]",selectorActive:"",selectorActiveParent:"",selectorTopElem:"",selectorBotElem:"",saveKey:"ScrollStash",throttleDelay:500,positionBottom:!0,padding:16}),t),e.scrolls=[],e.state={},e.ticking=!1,e.init=function(){e.scrolls=document.querySelectorAll("[data-".concat(e.settings.dataScroll,"]")),e.scrolls.forEach((function(t){n(),e.settings.selectorActive&&l(t),t.addEventListener("scroll",r,!1)}))},e.destroy=function(){e.scrolls.forEach((function(t){t.removeEventListener("scroll",r,!1)})),e.scrolls=[],e.state={},localStorage.removeItem(e.settings.saveKey)},e.showActive=function(t){e.settings.selectorActive&&l(t)};var r=function(){e.ticking||(setTimeout(s,e.settings.throttleDelay),e.ticking=!0)},s=function(){c(),e.ticking=!1},c=function(){document.querySelectorAll("[data-".concat(e.settings.dataScroll,"]")).forEach((function(t){var o,r=t.dataset[(o=e.settings.dataScroll,o.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})))];r&&(e.state[r]=t.scrollTop)})),localStorage.setItem(e.settings.saveKey,JSON.stringify(e.state))},n=function(){localStorage.getItem(e.settings.saveKey)?(e.state=JSON.parse(localStorage.getItem(e.settings.saveKey)),Object.keys(e.state).forEach((function(t){var o=document.querySelector("[data-".concat(e.settings.dataScroll,'="').concat(t,'"]'));o&&(o.scrollTop=e.state[t])}))):c()},l=function(t){var o=t.querySelector(e.settings.selectorActive);if(o&&e.settings.selectorActiveParent&&(o=o.closest(e.settings.selectorActiveParent)),o){var r=e.settings.padding,s=e.settings.padding;e.settings.selectorTopElem&&(r+=t.querySelector(e.settings.selectorElementPadding).offsetHeight),e.settings.selectorBotElem&&(s+=t.querySelector(e.settings.selectorElementPadding).offsetHeight);var c=o.offsetTop-r,n=o.offsetTop-(t.offsetHeight-(o.offsetHeight+s));t.scrollTop>c?t.scrollTop=c:t.scrollTop<n&&(t.scrollTop=n)}};return e.settings.autoInit&&e.init(),e}}();
