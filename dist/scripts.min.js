this.ScrollStash=function(){"use strict";var t=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},e=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))};function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function o(e){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?r(Object(s),!0).forEach((function(r){t(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}return function(t){var r={};r.settings=o(o({},{autoInit:!1,dataScroll:"scroll-stash",dataAnchor:"scroll-stash-anchor",selectorAnchor:"",selectorAnchorParent:"",selectorTopElem:"",selectorBotElem:"",anchorPadding:16,saveKey:"ScrollStash",throttleDelay:500,customEventPrefix:"scroll-stash:"}),t),r.scrolls=[],r.state={},r.ticking=!1,r.init=function(){r.scrolls=document.querySelectorAll("[data-".concat(r.settings.dataScroll,"]")),a(),r.scrolls.forEach((function(t){r.settings.selectorAnchor&&l(t),t.addEventListener("scroll",s,!1)}))},r.destroy=function(){r.scrolls.forEach((function(t){t.removeEventListener("scroll",s,!1)})),r.scrolls=[],r.state={},localStorage.removeItem(r.settings.saveKey)},r.showAnchor=function(t){r.settings.selectorAnchor&&l(t)};var s=function(){r.ticking||(setTimeout(n,r.settings.throttleDelay),r.ticking=!0)},n=function(){c(),r.ticking=!1},c=function(){document.querySelectorAll("[data-".concat(r.settings.dataScroll,"]")).forEach((function(t){var o=t.dataset[e(r.settings.dataScroll)];o&&(r.state[o]=t.scrollTop)})),localStorage.setItem(r.settings.saveKey,JSON.stringify(r.state));var t=new CustomEvent(r.settings.customEventPrefix+"saved",{bubbles:!0});document.dispatchEvent(t)},a=function(){localStorage.getItem(r.settings.saveKey)?(r.state=JSON.parse(localStorage.getItem(r.settings.saveKey)),Object.keys(r.state).forEach((function(t){var e=document.querySelector("[data-".concat(r.settings.dataScroll,'="').concat(t,'"]'));e&&(e.scrollTop=r.state[t]);var o=new CustomEvent(r.settings.customEventPrefix+"applied",{bubbles:!0});e.dispatchEvent(o)}))):c()},l=function(t){var o=t.querySelector(r.settings.selectorAnchor);o&&r.settings.selectorAnchorParent&&(o=o.closest(r.settings.selectorAnchorParent));var s=t.dataset[e(r.settings.dataAnchor)];if("false"==s)return!1;if(s&&(o=t.querySelector(s)?t.querySelector(s):o),o){var n=r.settings.anchorPadding,c=r.settings.anchorPadding;if(r.settings.selectorTopElem){var a=t.querySelector(r.settings.selectorTopElem);a&&(n+=a.offsetHeight)}if(r.settings.selectorBotElem){var l=t.querySelector(r.settings.selectorBotElem);l&&(c+=l.offsetHeight)}var i=o.offsetTop-n,u=o.offsetTop-(t.offsetHeight-(o.offsetHeight+c));t.scrollTop>i?t.scrollTop=i:t.scrollTop<u&&(t.scrollTop=u);var f=new CustomEvent(r.settings.customEventPrefix+"anchor",{bubbles:!0});t.dispatchEvent(f)}};return r.settings.autoInit&&r.init(),r}}();
