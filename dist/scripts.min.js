this.ScrollStash=function(){"use strict";var t=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},e=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},r=function(t,r){return document.querySelectorAll("[data-".concat(r.dataScroll,"]")).forEach((function(o){var n=o.dataset[e(r.dataScroll)];n&&(t[n]=o.scrollTop)})),localStorage.setItem(r.saveKey,JSON.stringify(t)),document.dispatchEvent(new CustomEvent(r.customEventPrefix+"saved",{bubbles:!0,detail:t})),t},o=function(t,e,r){var o=r.anchorPadding;if(r.selectorTopElem){var n=t.querySelector(r.selectorTopElem);n&&(o+=n.offsetHeight)}return e.offsetTop-o},n=function(t,e,r){var o=r.anchorPadding;if(r.selectorBotElem){var n=t.querySelector(r.selectorBotElem);n&&(o+=n.offsetHeight)}return e.offsetTop-(t.offsetHeight-(e.offsetHeight+o))},c=function(t,e,r){switch(r.alignment){case"start":return o(t,e,r);case"end":return n(t,e,r);case"nearest":return function(t,e,r){var c=o(t,e,r),a=n(t,e,r);return t.scrollTop>c?c:t.scrollTop<a&&a}(t,e,r);default:return!1}},a=function(t,r,o){var n=function(t,r){var o=t.dataset[e(r.dataAnchor)];if("false"==o||"ignore"==o)return null;if(o&&t.querySelector(o))return t.querySelector(o);var n=r.selectorAnchor?t.querySelector(r.selectorAnchor):null;if(n&&r.selectorAnchorParent){var c=n.closest(r.selectorAnchorParent);if(c)return c}return n||null}(t,o);if(n){var a=c(t,n,o);if(!a)return!0;t.scroll({top:a,behavior:r||o.behavior}),t.dispatchEvent(new CustomEvent(o.customEventPrefix+"anchor",{bubbles:!0,detail:{key:t.dataset[e(o.dataScroll)],position:t.scrollTop}}))}};function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function l(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?s(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}return function(t){var e={showAnchor:function(t,r){a(t,r,e.settings)}};e.settings=l(l({},{autoInit:!1,dataScroll:"scroll-stash",dataAnchor:"scroll-stash-anchor",selectorAnchor:"",selectorAnchorParent:"",selectorTopElem:"",selectorBotElem:"",alignment:"nearest",behavior:"auto",anchorPadding:16,saveKey:"ScrollStash",throttleDelay:250,customEventPrefix:"scroll-stash:"}),t),e.scrolls=[],e.state={},e.ticking=!1,e.init=function(){var t,n;e.scrolls=document.querySelectorAll("[data-".concat(e.settings.dataScroll,"]")),e.state=(t=e.state,n=e.settings,localStorage.getItem(n.saveKey)?(t=JSON.parse(localStorage.getItem(n.saveKey)),Object.keys(t).forEach((function(e){var r=document.querySelector("[data-".concat(n.dataScroll,'="').concat(e,'"]'));r&&(r.scrollTop=t[e])})),document.dispatchEvent(new CustomEvent(n.customEventPrefix+"applied",{bubbles:!0,detail:t})),t):r(t,n)),e.scrolls.forEach((function(t){a(t,!1,e.settings),t.addEventListener("scroll",o,!1)}))},e.destroy=function(){e.scrolls.forEach((function(t){t.removeEventListener("scroll",o,!1)})),e.scrolls=[],e.state={},localStorage.removeItem(e.settings.saveKey)};var o=function(){e.ticking||(setTimeout(n,e.settings.throttleDelay),e.ticking=!0)},n=function(){e.state=r(e.state,e.settings),e.ticking=!1};return e.settings.autoInit&&e.init(),e}}();
