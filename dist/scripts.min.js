this.ScrollStash=function(){"use strict";var t=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var r=function(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}((function(t){function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(r)}t.exports=e})),n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,a=parseInt,l="object"==r(e)&&e&&e.Object===Object&&e,u="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,s=l||u||Function("return this")(),f=Object.prototype.toString,p=Math.max,d=Math.min,v=function(){return s.Date.now()};function y(t,e,r){var n,o,i,c,a,l,u=0,s=!1,f=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var r=n,i=o;return n=o=void 0,u=e,c=t.apply(i,r)}function m(t){return u=t,a=setTimeout(E,e),s?g(t):c}function S(t){var r=t-l;return void 0===l||r>=e||r<0||f&&t-u>=i}function E(){var t=v();if(S(t))return O(t);a=setTimeout(E,function(t){var r=e-(t-l);return f?d(r,i-(t-u)):r}(t))}function O(t){return a=void 0,y&&n?g(t):(n=o=void 0,c)}function j(){var t=v(),r=S(t);if(n=arguments,o=this,l=t,r){if(void 0===a)return m(l);if(f)return a=setTimeout(E,e),g(l)}return void 0===a&&(a=setTimeout(E,e)),c}return e=h(e)||0,b(r)&&(s=!!r.leading,i=(f="maxWait"in r)?p(h(r.maxWait)||0,e):i,y="trailing"in r?!!r.trailing:y),j.cancel=function(){void 0!==a&&clearTimeout(a),u=0,n=l=o=a=void 0},j.flush=function(){return void 0===a?c:O(v())},j}function b(t){var e=r(t);return!!t&&("object"==e||"function"==e)}function g(t){return"symbol"==r(t)||function(t){return!!t&&"object"==r(t)}(t)&&"[object Symbol]"==f.call(t)}function h(t){if("number"==typeof t)return t;if(g(t))return NaN;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var r=i.test(t);return r||c.test(t)?a(t.slice(2),r?2:8):o.test(t)?NaN:+t}var m=function(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return b(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),y(t,e,{leading:n,maxWait:e,trailing:o})},S={autoInit:!1,dataScroll:"scroll-stash",dataAnchor:"scroll-stash-anchor",selectorAnchor:"",selectorAnchorParent:"",selectorTopElem:"",selectorBotElem:"",alignment:"nearest",behavior:"auto",anchorPadding:16,saveKey:"ScrollStash",throttleDelay:250,customEventPrefix:"scroll-stash:"},E=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},O=function(t,e,r){var n=r.anchorPadding;if(r.selectorTopElem){var o=t.querySelector(r.selectorTopElem);o&&(n+=o.offsetHeight)}return e.offsetTop-n},j=function(t,e,r){var n=r.anchorPadding;if(r.selectorBotElem){var o=t.querySelector(r.selectorBotElem);o&&(n+=o.offsetHeight)}return e.offsetTop-(t.offsetHeight-(e.offsetHeight+n))},w=function(t,e,r){switch(r.alignment){case"start":return O(t,e,r);case"end":return j(t,e,r);case"nearest":return function(t,e,r){var n=O(t,e,r),o=j(t,e,r);return t.scrollTop>n?n:t.scrollTop<o&&o}(t,e,r);default:return!1}},P=function(t,e){var r=t.dataset[E(e.dataAnchor)];if("false"==r||"ignore"==r)return null;if(r&&t.querySelector(r))return t.querySelector(r);var n=e.selectorAnchor?t.querySelector(e.selectorAnchor):null;if(n&&e.selectorAnchorParent){var o=n.closest(e.selectorAnchorParent);if(o)return o}return n||null},T=P,x=function(t,e,r){var n=P(t,r);if(n){var o=w(t,n,r);if(!o)return!0;t.scroll({top:o,behavior:e||r.behavior}),t.dispatchEvent(new CustomEvent(r.customEventPrefix+"anchor",{bubbles:!0,detail:{key:t.dataset[E(r.dataScroll)],position:t.scrollTop}}))}},q=function(t,e){return document.querySelectorAll("[data-".concat(e.dataScroll,"]")).forEach((function(r){var n=r.dataset[E(e.dataScroll)];n&&(t[n]=r.scrollTop)})),localStorage.setItem(e.saveKey,JSON.stringify(t)),document.dispatchEvent(new CustomEvent(e.customEventPrefix+"saved",{bubbles:!0,detail:t})),t},A=q,D=function(t,e){return localStorage.getItem(e.saveKey)?(t=JSON.parse(localStorage.getItem(e.saveKey)),Object.keys(t).forEach((function(r){var n=document.querySelector("[data-".concat(e.dataScroll,'="').concat(r,'"]'));n&&(n.scrollTop=t[r])})),document.dispatchEvent(new CustomEvent(e.customEventPrefix+"applied",{bubbles:!0,detail:t})),t):q(t,e)};function I(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?I(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}return function(t){var e={anchorShow:function(t,r){x(t,r,e.settings)},anchorGet:function(t){return T(t,e.settings)}};e.settings=N(N({},S),t),e.scrolls=[],e.state={};var r=m((function(){return e.state=A(e.state,e.settings)}),e.settings.throttleDelay,{leading:!1});return e.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(e.settings=N(N({},e.settings),t)),e.scrolls=document.querySelectorAll("[data-".concat(e.settings.dataScroll,"]")),e.state=D(e.state,e.settings),e.scrolls.forEach((function(t){x(t,!1,e.settings),t.addEventListener("scroll",r,!1)}))},e.destroy=function(){e.scrolls.forEach((function(t){t.removeEventListener("scroll",r,!1)})),e.scrolls=[],e.state={},localStorage.removeItem(e.settings.saveKey)},e.settings.autoInit&&e.init(),e}}();
