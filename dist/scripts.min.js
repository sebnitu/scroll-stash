this.ScrollStash=function(){"use strict";var t=function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t},e=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))};function o(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function r(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?o(Object(s),!0).forEach((function(o){t(e,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}return function(t){var o={};o.settings=r(r({},{autoInit:!1,dataScroll:"scroll-stash",dataAnchor:"scroll-stash-anchor",selectorAnchor:"",selectorAnchorParent:"",selectorTopElem:"",selectorBotElem:"",behavior:"auto",anchorPadding:16,saveKey:"ScrollStash",throttleDelay:250,customEventPrefix:"scroll-stash:"}),t),o.scrolls=[],o.state={},o.ticking=!1,o.init=function(){o.scrolls=document.querySelectorAll("[data-".concat(o.settings.dataScroll,"]")),a(),o.scrolls.forEach((function(t){o.settings.selectorAnchor&&i(t),t.addEventListener("scroll",s,!1)}))},o.destroy=function(){o.scrolls.forEach((function(t){t.removeEventListener("scroll",s,!1)})),o.scrolls=[],o.state={},localStorage.removeItem(o.settings.saveKey)},o.showAnchor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.settings.behavior;o.settings.selectorAnchor&&i(t,e)};var s=function(){o.ticking||(setTimeout(n,o.settings.throttleDelay),o.ticking=!0)},n=function(){c(),o.ticking=!1},c=function(){document.querySelectorAll("[data-".concat(o.settings.dataScroll,"]")).forEach((function(t){var r=t.dataset[e(o.settings.dataScroll)];r&&(o.state[r]=t.scrollTop)})),localStorage.setItem(o.settings.saveKey,JSON.stringify(o.state));var t=new CustomEvent(o.settings.customEventPrefix+"saved",{bubbles:!0,detail:o.state});document.dispatchEvent(t)},a=function(){if(localStorage.getItem(o.settings.saveKey)){o.state=JSON.parse(localStorage.getItem(o.settings.saveKey)),Object.keys(o.state).forEach((function(t){var e=document.querySelector("[data-".concat(o.settings.dataScroll,'="').concat(t,'"]'));e&&(e.scrollTop=o.state[t])}));var t=new CustomEvent(o.settings.customEventPrefix+"applied",{bubbles:!0,detail:o.state});document.dispatchEvent(t)}else c()},i=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.settings.behavior,s=t.querySelector(o.settings.selectorAnchor);s&&o.settings.selectorAnchorParent&&(s=s.closest(o.settings.selectorAnchorParent));var n=t.dataset[e(o.settings.dataAnchor)];if("false"==n||"ignore"==n)return!1;if(n&&(s=t.querySelector(n)?t.querySelector(n):s),s){var c=o.settings.anchorPadding,a=o.settings.anchorPadding;if(o.settings.selectorTopElem){var i=t.querySelector(o.settings.selectorTopElem);i&&(c+=i.offsetHeight)}if(o.settings.selectorBotElem){var l=t.querySelector(o.settings.selectorBotElem);l&&(a+=l.offsetHeight)}var u=s.offsetTop-c,g=s.offsetTop-(t.offsetHeight-(s.offsetHeight+a));t.scrollTop>u?t.scroll({top:u,behavior:r}):t.scrollTop<g&&t.scroll({top:g,behavior:r});var f=new CustomEvent(o.settings.customEventPrefix+"anchor",{bubbles:!0,detail:{key:t.dataset[e(o.settings.dataScroll)],position:t.scrollTop}});t.dispatchEvent(f)}};return o.settings.autoInit&&o.init(),o}}();
