this.ScrollStash=function(){"use strict";var t=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},e={autoInit:!1,dataScroll:"scroll-stash",dataAnchor:"scroll-stash-anchor",selectorAnchor:"",selectorAnchorParent:"",selectorTopElem:"",selectorBotElem:"",alignment:"nearest",behavior:"auto",anchorPadding:16,saveKey:"ScrollStash",throttleDelay:250,customEventPrefix:"scroll-stash:"},r=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},n=function(t,e){return document.querySelectorAll("[data-".concat(e.dataScroll,"]")).forEach((function(n){var o=n.dataset[r(e.dataScroll)];o&&(t[o]=n.scrollTop)})),localStorage.setItem(e.saveKey,JSON.stringify(t)),document.dispatchEvent(new CustomEvent(e.customEventPrefix+"saved",{bubbles:!0,detail:t})),t},o=function(t,e){return localStorage.getItem(e.saveKey)?(t=JSON.parse(localStorage.getItem(e.saveKey)),Object.keys(t).forEach((function(r){var n=document.querySelector("[data-".concat(e.dataScroll,'="').concat(r,'"]'));n&&(n.scrollTop=t[r])})),document.dispatchEvent(new CustomEvent(e.customEventPrefix+"applied",{bubbles:!0,detail:t})),t):n(t,e)},c=function(t,e,r){var n=r.anchorPadding;if(r.selectorTopElem){var o=t.querySelector(r.selectorTopElem);o&&(n+=o.offsetHeight)}return e.offsetTop-n},s=function(t,e,r){var n=r.anchorPadding;if(r.selectorBotElem){var o=t.querySelector(r.selectorBotElem);o&&(n+=o.offsetHeight)}return e.offsetTop-(t.offsetHeight-(e.offsetHeight+n))},a=function(t,e,r){switch(r.alignment){case"start":return c(t,e,r);case"end":return s(t,e,r);case"nearest":return function(t,e,r){var n=c(t,e,r),o=s(t,e,r);return t.scrollTop>n?n:t.scrollTop<o&&o}(t,e,r);default:return!1}},l=function(t,e,n){var o=function(t,e){var n=t.dataset[r(e.dataAnchor)];if("false"==n||"ignore"==n)return null;if(n&&t.querySelector(n))return t.querySelector(n);var o=e.selectorAnchor?t.querySelector(e.selectorAnchor):null;if(o&&e.selectorAnchorParent){var c=o.closest(e.selectorAnchorParent);if(c)return c}return o||null}(t,n);if(o){var c=a(t,o,n);if(!c)return!0;t.scroll({top:c,behavior:e||n.behavior}),t.dispatchEvent(new CustomEvent(n.customEventPrefix+"anchor",{bubbles:!0,detail:{key:t.dataset[r(n.dataScroll)],position:t.scrollTop}}))}};function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}return function(t){var r={showAnchor:function(t,e){l(t,e,r.settings)}};r.settings=u(u({},e),t),r.scrolls=[],r.state={},r.ticking=!1,r.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(r.settings=u(u({},r.settings),t)),r.scrolls=document.querySelectorAll("[data-".concat(r.settings.dataScroll,"]")),r.state=o(r.state,r.settings),r.scrolls.forEach((function(t){l(t,!1,r.settings),t.addEventListener("scroll",c)}))},r.destroy=function(){r.scrolls.forEach((function(t){t.removeEventListener("scroll",c)})),r.scrolls=[],r.state={},localStorage.removeItem(r.settings.saveKey)};var c=function(){r.ticking||(setTimeout((function(){r.state=n(r.state,r.settings),r.ticking=!1}),r.settings.throttleDelay),r.ticking=!0)};return r.settings.autoInit&&r.init(),r}}();
