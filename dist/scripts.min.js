this.ScrollStash=function(){"use strict";var t=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},e=function(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))},r=function(t,r){var n=t.dataset[e(r.dataAnchor)];if("false"==n||"ignore"==n)return null;if(n&&t.querySelector(n))return t.querySelector(n);var o=r.selectorAnchor?t.querySelector(r.selectorAnchor):null;if(o&&r.selectorAnchorParent){var s=o.closest(r.selectorAnchorParent);if(s)return s}return o||null},n=function(t,e,r){var n=r.anchorPadding;if(r.selectorTopElem){var o=t.querySelector(r.selectorTopElem);o&&(n+=o.offsetHeight)}return e.offsetTop-n},o=function(t,e,r){var n=r.anchorPadding;if(r.selectorBotElem){var o=t.querySelector(r.selectorBotElem);o&&(n+=o.offsetHeight)}return e.offsetTop-(t.offsetHeight-(e.offsetHeight+n))},s=function(t,e,r){switch(r.alignment){case"start":return n(t,e,r);case"end":return o(t,e,r);case"nearest":return function(t,e,r){var s=n(t,e,r),c=o(t,e,r);return t.scrollTop>s?s:t.scrollTop<c&&c}(t,e,r);default:return!1}};function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}return function(t){var n={};n.settings=a(a({},{autoInit:!1,dataScroll:"scroll-stash",dataAnchor:"scroll-stash-anchor",selectorAnchor:"",selectorAnchorParent:"",selectorTopElem:"",selectorBotElem:"",alignment:"nearest",behavior:"auto",anchorPadding:16,saveKey:"ScrollStash",throttleDelay:250,customEventPrefix:"scroll-stash:"}),t),n.scrolls=[],n.state={},n.ticking=!1,n.init=function(){n.scrolls=document.querySelectorAll("[data-".concat(n.settings.dataScroll,"]")),i(),n.scrolls.forEach((function(t){n.showAnchor(t),t.addEventListener("scroll",o,!1)}))},n.destroy=function(){n.scrolls.forEach((function(t){t.removeEventListener("scroll",o,!1)})),n.scrolls=[],n.state={},localStorage.removeItem(n.settings.saveKey)};var o=function(){n.ticking||(setTimeout(c,n.settings.throttleDelay),n.ticking=!0)},c=function(){l(),n.ticking=!1},l=function(){document.querySelectorAll("[data-".concat(n.settings.dataScroll,"]")).forEach((function(t){var r=t.dataset[e(n.settings.dataScroll)];r&&(n.state[r]=t.scrollTop)})),localStorage.setItem(n.settings.saveKey,JSON.stringify(n.state)),document.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"saved",{bubbles:!0,detail:n.state}))},i=function(){localStorage.getItem(n.settings.saveKey)?(n.state=JSON.parse(localStorage.getItem(n.settings.saveKey)),Object.keys(n.state).forEach((function(t){var e=document.querySelector("[data-".concat(n.settings.dataScroll,'="').concat(t,'"]'));e&&(e.scrollTop=n.state[t])})),document.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"applied",{bubbles:!0,detail:n.state}))):l()};return n.showAnchor=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.settings.behavior,c=r(t,n.settings);if(c){var a=s(t,c,n.settings);if(!a)return!0;t.scroll({top:a,behavior:o}),t.dispatchEvent(new CustomEvent(n.settings.customEventPrefix+"anchor",{bubbles:!0,detail:{key:t.dataset[e(n.settings.dataScroll)],position:t.scrollTop}}))}},n.settings.autoInit&&n.init(),n}}();
